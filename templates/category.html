{% extends 'base.html' %}
{% load static %}

{% block title %}{{ category.name }} - My Shop{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-10">
    <!-- Category Title -->
    <h1 class="text-3xl font-bold mb-8">{{ category.name }}</h1>

    {% if products %}
    <!-- Product Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for product in products %}
        <div class="bg-white shadow-md rounded-lg overflow-hidden flex flex-col">
            <!-- Product Image -->
            <a href="{% url 'product_detail' product.id %}">
                <div class="w-full h-56 bg-white flex items-center justify-center p-2">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}"
                         class="max-h-full max-w-full object-contain transition-transform duration-300 hover:scale-105">
                </div>
            </a>

            <!-- Product Info -->
            <div class="p-4 flex flex-col flex-grow">
                <!-- Product Name (2-line limit with ellipsis) -->
                <h3 class="text-lg font-semibold text-gray-800 mb-2 overflow-hidden text-ellipsis line-clamp-2"
                    style="-webkit-line-clamp: 2; -webkit-box-orient: vertical; display: -webkit-box;">
                    {{ product.name }}
                </h3>

                <p class="text-gray-600 text-sm mb-4">Rs. {{ product.price }}</p>

                <!-- Add to Cart Button -->
                <a href="{% url 'add_to_cart' product.id %}"
                   class="mt-auto inline-block text-center bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200">
                    üõí Add to Cart
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- No Products -->
    <div class="text-center text-gray-600">
        <p class="text-lg">No products found in this category.</p>
        <a href="{% url 'home' %}" class="mt-4 inline-block text-blue-600 hover:underline font-semibold">
            ‚Üê Back to Home
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
